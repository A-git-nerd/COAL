     1                                  [org 100h]
     2 00000000 EB41                    jmp start
     3                                  
     4                                  setup:
     5 00000002 B800B8                  mov ax,0xb800
     6 00000005 8ED8                    mov ds,ax
     7 00000007 8EC0                    mov es,ax
     8 00000009 BA0000                  mov dx,0
     9 0000000C BB7008                  mov bx,2160
    10 0000000F C3                      ret
    11                                  
    12                                  Swapping:
    13                                  ;12 rows
    14                                  outer:
    15 00000010 B90D00                  mov cx,13
    16 00000013 89D7                    mov di,dx 
    17 00000015 89DE                    mov si,bx
    18                                  inner:
    19 00000017 51                      push cx
    20 00000018 B92800                  mov cx,40
    21                                  ;di->0 si->2160
    22                                  inner2:
    23 0000001B 3E8B15                  mov dx,[ds:di]
    24 0000001E 52                      push dx
    25 0000001F 3E8B14                  mov dx,[ds:si]
    26 00000022 268915                  mov [es:di],dx ;es:di <<- ds:si
    27 00000025 5A                      pop dx
    28 00000026 268914                  mov [es:si],dx
    29 00000029 83C702                  add di,2
    30 0000002C 83C602                  add si,2
    31 0000002F E2EA                    loop inner2
    32 00000031 59                      pop cx
    33 00000032 83EE50                  sub si,80
    34 00000035 81C6A000                add si,160
    35 00000039 83EF50                  sub di,80
    36 0000003C 81C7A000                add di,160
    37 00000040 E2D5                    loop inner 
    38 00000042 C3                      ret
    39                                  
    40                                  start:
    41 00000043 E8BCFF                  call setup
    42 00000046 E8C7FF                  call Swapping
    43                                  
    44                                  ;end
    45 00000049 B84C00                  mov ax,4ch
    46 0000004C CD21                    int 21h
